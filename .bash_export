# ~/.bash_exports
# Экспорт переменных окружения и глобальных настроек

# ==============================================================================
#   ЦВЕТОВЫЕ КОДЫ (из lib/colors.bash)
# ==============================================================================

# Сброс всех атрибутов
export Reset="\e[0m"

# Цвета текста
export Black="\e[30m"
export Red="\e[31m"
export Green="\e[32m"
export Yellow="\e[33m"
export Blue="\e[34m"
export Magenta="\e[35m"
export Cyan="\e[36m"
export White="\e[37m"

# Жирные цвета
export BBlack="\e[1;30m"
export BRed="\e[1;31m"
export BGreen="\e[1;32m"
export BYellow="\e[1;33m"
export BBlue="\e[1;34m"
export BMagenta="\e[1;35m"
export BCyan="\e[1;36m"
export BWhite="\e[1;37m"

# --- Пути (PATH) ---
# Добавить пользовательский каталог bin в PATH для запуска локальных скриптов
[ -d "$HOME/bin" ] && [[ ":$PATH:" != *":$HOME/bin:"* ]] && PATH="$HOME/bin:$PATH"
# Добавить локальный каталог .local/bin (стандарт для pip)
[ -d "$HOME/.local/bin" ] && [[ ":$PATH:" != *":$HOME/.local/bin:"* ]] && PATH="$HOME/.local/bin:$PATH"

# --- Редакторы и пейджеры ---
export EDITOR='nano'
export PAGER='less'
export LESS='-R'
export DOCKER_HOST=unix:///var/run/docker.sock

# --- Настройки локали ---
export LANG='ru_RU.UTF-8'
export LC_ALL='ru_RU.UTF-8'

# --- Настройки цветов ---
export CLICOLOR=1
export LS_COLORS='di=1;34:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43'

# --- SSH Agent ---
# Автоматический запуск ssh-agent и добавление ключей.
if [ -f ~/.ssh/id_ed25519 ] && [ -f ~/.ssh/id_ed25519.pub ]; then
    export SSH_AUTH_SOCK=~/.ssh/agent
    if ! pgrep -f "$SSH_AUTH_SOCK" >/dev/null; then
        rm -f "$SSH_AUTH_SOCK"
        ssh-agent -a "$SSH_AUTH_SOCK" &>/dev/null
    fi
    # Добавляем ключ, только если он еще не добавлен.
    ssh-add -l | grep -q "$(cut -f1,2 -d' ' ~/.ssh/id_ed25519.pub)" || ssh-add ~/.ssh/id_ed25519
fi
# --- Настройки плагина less-pretty-cat ---
# Включает подсветку синтаксиса для less через функцию _lessfilter
# Требует: pip install Pygments
if command_exists "pygmentize"; then
    export LESSOPEN='| _lessfilter %s'
fi
export LESS=" -R"

# --- Настройки плагина man (цветные man-страницы) ---
# Делает man страницы более читаемыми с помощью цветов
export LESS_TERMCAP_mb=$'\e[1;31m'  # начало мигания
export LESS_TERMCAP_md=$'\e[1;32m'  # начало жирного
export LESS_TERMCAP_me=$'\e[0m'     # конец всех атрибутов
export LESS_TERMCAP_se=$'\e[0m'     # конец standout
export LESS_TERMCAP_so=$'\e[01;33m' # начало standout
export LESS_TERMCAP_ue=$'\e[0m'     # конец подчеркивания
export LESS_TERMCAP_us=$'\e[04;36m' # начало подчеркивания
